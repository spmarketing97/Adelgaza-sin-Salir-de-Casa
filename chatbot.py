import re
import json
import random
from flask import Flask, request, jsonify, render_template, url_for
import nltk
from nltk.tokenize import word_tokenize
from nltk.corpus import stopwords
from nltk.stem import WordNetLemmatizer
import requests
from bs4 import BeautifulSoup
import os

# Descargar recursos de NLTK necesarios
try:
    nltk.data.find('tokenizers/punkt')
    nltk.data.find('corpora/stopwords')
    nltk.data.find('corpora/wordnet')
except LookupError:
    nltk.download('punkt')
    nltk.download('stopwords')
    nltk.download('wordnet')

app = Flask(__name__)

# Estructura de la informaci√≥n extra√≠da de la landing page
landing_info = {
    "nombre_programa": "Adelgaza sin Salir de Casa",
    "duracion_diaria": "45 minutos al d√≠a",
    "dias_semana": "5 d√≠as a la semana",
    "niveles": [
        {"nombre": "Nivel b√°sico 1", "clases": 5},
        {"nombre": "Nivel B√°sico 2", "clases": 5},
        {"nombre": "Nivel Intermedio 1", "clases": 5},
        {"nombre": "Nivel Intermedio 2", "clases": 5},
        {"nombre": "Nivel Avanzado 1", "clases": 5},
        {"nombre": "Nivel Avanzado 2", "clases": 5}
    ],
    "bonus": [
        {"nombre": "Baile", "clases": 3, "descripcion": "Aprender√°s pasos b√°sicos de diferentes g√©neros musicales"},
        {"nombre": "Embarazo", "clases": 3, "descripcion": "Para mujeres que quieren mantenerse activas durante esta etapa"},
        {"nombre": "Adulto Mayor", "clases": 2, "descripcion": "Ejercicios para fortalecer todos los grupos musculares"},
        {"nombre": "Estiramiento", "clases": 2, "descripcion": "Para elongar tu cuerpo y evitar lesiones"}
    ],
    "beneficios": [
        "Ahorrar√°s mucho dinero en DIETAS y GIMNASIOS",
        "Mejorar√°s tu estado f√≠sico reduciendo niveles de depresi√≥n y ansiedad",
        "Tendr√°s dos entrenadores profesionales de manera virtual",
        "Ahorrar√°s tiempo usando entrenamiento de tan solo 45 minutos al d√≠a",
        "Aprender√°s a usar los elementos de tu hogar para hacer entrenamientos",
        "Podr√°s entrenar con la ropa que desees",
        "Tendr√°s al alcance un tel√©fono o una computadora",
        "El tiempo, dinero y lugar dejar√°n de ser un problema",
        "Adquirir√°s h√°bitos m√°s saludables y mejorar√°s tu salud"
    ],
    "testimonios": [
        {"nombre": "ZENAIDA RODRIGUEZ", "comentario": "Dur√© casi dos a√±os en un gimnasio y nunca hab√≠a obtenido los resultados tan maravillosos que tengo ahora, he bajado m√°s de 4 kilos"},
        {"nombre": "YOLANDA ARIAS", "comentario": "Estoy muy feliz de poder hacer los ejercicios desde mi casa, ya baj√© m√°s de 5 kilos"},
        {"nombre": "ELIANA HERRERA", "comentario": "Llevaba m√°s de 10 a√±os sin hacer ejercicio y empec√© con rutinas suaves desde mi casa"}
    ],
    "entrenadores": ["NATALIA ALARC√ìN", "CRISTIAN ESPINOSA"],
    "experiencia_entrenadores": "Artistas, bailarines y entrenadores profesionales con recorrido internacional en pa√≠ses como CHINA, KOREA DEL SUR, M√âXICO, ITALIA, FRANCIA, TURQUIA y U.S.A",
    "precio": {
        "normal": 169.00,
        "oferta": 90.00,
        "ahorro": "47%"
    },
    "enlace_inscripcion": "https://hotm.art/AdelgazasinSalirdeCasa-LanCheckOut",
    "contacto": "hristiankrasimirov7@gmail.com"
}

# Preguntas frecuentes
faq = [
    {
        "question": "¬øCu√°nto tiempo dura cada clase?",
        "answer": "Cada clase tiene una duraci√≥n de 45 minutos. El programa est√° dise√±ado para que entrenes 5 d√≠as a la semana."
    },
    {
        "question": "¬øNecesito equipamiento especial?",
        "answer": "No, el programa est√° dise√±ado para utilizar elementos que ya tienes en tu hogar. Aprender√°s a ser recursivo y usar los objetos de tu casa para hacer los entrenamientos."
    },
    {
        "question": "¬øQu√© nivel de condici√≥n f√≠sica necesito?",
        "answer": "El programa est√° dividido en 6 niveles progresivos, desde b√°sico hasta avanzado. Cada nivel tiene 5 clases, lo que te permite comenzar desde cero e ir avanzando gradualmente."
    },
    {
        "question": "¬øObtendr√© un certificado?",
        "answer": "S√≠, recibir√°s un certificado al completar el programa como reconocimiento por tu dedicaci√≥n y logros."
    },
    {
        "question": "¬øCu√°l es el precio del programa?",
        "answer": f"El precio normal es de ${landing_info['precio']['normal']}, pero actualmente est√° en oferta por solo ${landing_info['precio']['oferta']}, lo que te permite ahorrar un {landing_info['precio']['ahorro']}."
    },
    {
        "question": "¬øC√≥mo puedo inscribirme?",
        "answer": f"Puedes inscribirte haciendo clic en el bot√≥n '¬°QUIERO INSCRIBIRME AHORA!' o visitando directamente este enlace: {landing_info['enlace_inscripcion']}"
    },
    {
        "question": "¬øQui√©nes son los entrenadores?",
        "answer": f"Los entrenadores son {' y '.join(landing_info['entrenadores'])}, {landing_info['experiencia_entrenadores']}."
    },
    {
        "question": "¬øQu√© bonus incluye el programa?",
        "answer": "El programa incluye 10 clases de regalo como bonus: 3 de baile, 3 para mujeres en embarazo, 2 para adulto mayor y 2 de estiramiento."
    },
    {
        "question": "¬øPuedo hacer las clases a cualquier hora?",
        "answer": "S√≠, una de las ventajas del programa es la flexibilidad de horarios. Puedes realizar las clases cuando mejor te convenga, desde la comodidad de tu hogar."
    },
    {
        "question": "¬øC√≥mo puedo contactar con soporte?",
        "answer": f"Puedes contactarnos directamente a trav√©s del correo electr√≥nico: {landing_info['contacto']}"
    }
]

# Patrones de conversaci√≥n para el chatbot
conversation_patterns = {
    "saludos": [
        r"hola",
        r"buenos d√≠as",
        r"buenas tardes",
        r"buenas noches",
        r"saludos",
        r"qu√© tal",
        r"como estas",
        r"hey"
    ],
    "despedidas": [
        r"adi√≥s",
        r"chao",
        r"hasta luego",
        r"hasta pronto",
        r"nos vemos",
        r"bye"
    ],
    "agradecimientos": [
        r"gracias",
        r"muchas gracias",
        r"te lo agradezco",
        r"thanks"
    ],
    "precio": [
        r"(cu√°nto|cuanto|que|qu√©) (cuesta|vale|precio|valor)",
        r"precio",
        r"valor",
        r"costo",
        r"tarifa",
        r"oferta",
        r"descuento",
        r"dolares",
        r"pesos"
    ],
    "informacion_programa": [
        r"(c√≥mo|como) (funciona|es) (el|este) (programa|curso|entrenamiento)",
        r"(dime|cu√©ntame|explicame) (sobre|acerca) (el|este) (programa|curso)",
        r"(qu√©|que) (incluye|contiene|ofrece) (el|este) (programa|curso)",
        r"m√°s informaci√≥n",
        r"mas informaci√≥n",
        r"detalles"
    ],
    "beneficios": [
        r"(cu√°les|cuales|qu√©|que) (son) (los|) (beneficios|ventajas)",
        r"beneficios",
        r"ventajas",
        r"(por qu√©|porque) (deber√≠a|deberia) (inscribirme|comprarlo)"
    ],
    "niveles": [
        r"(cu√°les|cuales|qu√©|que) (son) (los|) (niveles|etapas|fases)",
        r"niveles",
        r"dificultad",
        r"(principiante|intermedio|avanzado)"
    ],
    "clases_bonus": [
        r"(qu√©|que) (clases|) (bonus|regalo|extra|adicional|gratis) (hay|incluye|ofrece)",
        r"bonus",
        r"regalos",
        r"extras",
        r"(clases|) adicionales",
        r"(clases|) gratis"
    ],
    "testimonio": [
        r"(cuales|cu√°les|qu√©|que) (testimonios|opiniones|comentarios|experiencias)",
        r"testimonios",
        r"opiniones",
        r"rese√±as",
        r"comentarios",
        r"experiencias",
        r"resultados"
    ],
    "entrenadores": [
        r"(qui√©nes|quienes|qui√©n|quien) (son) (los|) (entrenadores|profesores|instructores)",
        r"(entrenadores|profesores|instructores)",
        r"(experiencia|trayectoria|background) (de los|) (entrenadores|profesores|instructores)"
    ],
    "inscripcion": [
        r"(c√≥mo|como) (me|) (inscribo|registro|apunto|uno)",
        r"(d√≥nde|donde) (me|) (inscribo|registro|apunto|uno)",
        r"inscripci√≥n",
        r"registro",
        r"apuntarme",
        r"unirme",
        r"participar",
        r"comprar",
        r"adquirir"
    ],
    "duracion": [
        r"(cu√°nto|cuanto) (tiempo|) (dura|toma|lleva) (el|este|cada) (programa|curso|clase|sesi√≥n|entrenamiento)",
        r"duraci√≥n",
        r"tiempo",
        r"horas",
        r"minutos"
    ],
    "contacto": [
        r"(c√≥mo|como) (puedo|) (contactar|comunicarme|hablar)",
        r"(datos|informaci√≥n|info) (de|) (contacto)",
        r"contacto",
        r"email",
        r"correo",
        r"tel√©fono",
        r"numero",
        r"whatsapp"
    ]
}

# Respuestas del chatbot
chat_responses = {
    "saludos": [
        "¬°Hola! üëã Bienvenido/a al chatbot de Adelgaza sin Salir de Casa. ¬øEn qu√© puedo ayudarte hoy?",
        "¬°Hola! Estoy aqu√≠ para ayudarte con toda la informaci√≥n sobre nuestro programa de ejercicios. ¬øQu√© te gustar√≠a saber?",
        "¬°Bienvenido/a! Soy el asistente virtual de Adelgaza sin Salir de Casa. ¬øC√≥mo puedo asistirte hoy?"
    ],
    "despedidas": [
        "¬°Hasta pronto! Si tienes m√°s preguntas, no dudes en volver a conversar conmigo.",
        "¬°Adi√≥s! Espero haberte ayudado. Si quieres transformar tu cuerpo, ¬°no olvides inscribirte en nuestro programa!",
        "¬°Que tengas un excelente d√≠a! Recuerda que puedes transformar tu cuerpo con solo 45 minutos al d√≠a."
    ],
    "agradecimientos": [
        "¬°De nada! Estoy aqu√≠ para ayudarte. ¬øHay algo m√°s que quieras saber sobre el programa?",
        "Es un placer poder asistirte. ¬øNecesitas informaci√≥n adicional sobre alg√∫n aspecto del programa?",
        "¬°No hay de qu√©! ¬øHay algo m√°s en lo que pueda ayudarte a decidir si nuestro programa es adecuado para ti?"
    ],
    "precio": [
        f"El programa Adelgaza sin Salir de Casa tiene un precio normal de ${landing_info['precio']['normal']}, pero actualmente est√° en oferta por solo ${landing_info['precio']['oferta']}. ¬°Eso es un ahorro del {landing_info['precio']['ahorro']}! Adem√°s incluye garant√≠a de 7 d√≠as con 100% devoluci√≥n del dinero sin preguntas. ¬øTe gustar√≠a inscribirte ahora?",
        f"Tenemos una oferta especial: el programa completo por solo ${landing_info['precio']['oferta']} en lugar de ${landing_info['precio']['normal']}. Incluye todos los niveles, 10 clases bonus y garant√≠a de devoluci√≥n del dinero durante 7 d√≠as sin preguntas. ¬øTe interesa aprovecharlo?",
        f"Invertir en tu salud con nuestro programa cuesta √∫nicamente ${landing_info['precio']['oferta']} (precio normal: ${landing_info['precio']['normal']}), con garant√≠a de satisfacci√≥n de 7 d√≠as y reembolso completo sin preguntas. ¬øQuieres saber qu√© incluye esta inversi√≥n?"
    ],
    "informacion_programa": [
        f"Adelgaza sin Salir de Casa es un programa de ejercicios que puedes hacer desde tu hogar en solo {landing_info['duracion_diaria']} durante {landing_info['dias_semana']}. Incluye 6 niveles (desde b√°sico hasta avanzado) con 5 clases cada uno, m√°s 10 clases de regalo. ¬øTe gustar√≠a conocer m√°s sobre alg√∫n aspecto espec√≠fico?",
        f"Nuestro programa te permite transformar tu cuerpo sin necesidad de gimnasio, con solo {landing_info['duracion_diaria']}. Tiene una estructura progresiva de 6 niveles y adem√°s incluye 10 clases bonus. ¬øQu√© parte te interesa m√°s?",
        "El programa est√° dise√±ado para ayudarte a mejorar tu condici√≥n f√≠sica, perder peso y tonificar tu cuerpo, todo desde la comodidad de tu hogar. ¬øTe gustar√≠a saber sobre los beneficios espec√≠ficos o los niveles del programa?"
    ],
    "beneficios": [
        f"Los principales beneficios incluyen: 1) Ahorro de dinero en gimnasios, 2) Mejora tu estado f√≠sico y emocional, 3) Entrenamiento de solo {landing_info['duracion_diaria']}, 4) Flexibilidad para entrenar cuando quieras, 5) No necesitas equipamiento especial. ¬øQu√© beneficio te interesa m√°s?",
        "Con nuestro programa conseguir√°s resultados reales sin salir de casa, ahorrar√°s tiempo y dinero, y mejorar√°s tanto tu condici√≥n f√≠sica como tu bienestar emocional. ¬øTe gustar√≠a ver algunos testimonios de alumnos que ya lo han logrado?",
        "Entrenar con nosotros te permitir√° transformar tu cuerpo usando elementos que ya tienes en casa, con la gu√≠a de entrenadores profesionales, y en solo 45 minutos diarios. ¬øQuieres saber m√°s sobre alg√∫n beneficio espec√≠fico?"
    ],
    "niveles": [
        f"El programa consta de 6 niveles progresivos: {', '.join([nivel['nombre'] for nivel in landing_info['niveles']])}. Cada nivel tiene 5 clases, dise√±adas para ir aumentando gradualmente la intensidad. ¬øEn qu√© nivel te gustar√≠a comenzar?",
        "Tenemos una estructura de 6 niveles que va desde lo b√°sico hasta lo avanzado, para que puedas progresar a tu ritmo. Cada nivel tiene 5 clases diferentes. ¬øEres principiante o ya tienes experiencia haciendo ejercicio?",
        "Nuestro programa est√° estructurado en 6 niveles progresivos con 5 clases cada uno, dise√±ados para adaptarse a cualquier nivel de condici√≥n f√≠sica. ¬øTe gustar√≠a saber m√°s sobre alg√∫n nivel en particular?"
    ],
    "clases_bonus": [
        f"Como regalo especial, recibir√°s 10 clases adicionales: {', '.join([f'{bonus['nombre']} ({bonus['clases']} clases)' for bonus in landing_info['bonus']])}. Estas clases complementan perfectamente el programa principal. ¬øTe gustar√≠a saber m√°s sobre alguno de estos bonus?",
        "Adem√°s del programa principal, obtendr√°s 10 clases de regalo: baile, rutinas para embarazadas, ejercicios para adultos mayores y sesiones de estiramiento. ¬øCu√°l de estos bonus te interesa m√°s?",
        "Las 10 clases de regalo incluyen experiencias de baile, ejercicios adaptados para embarazadas, rutinas espec√≠ficas para adultos mayores y sesiones de estiramiento para prevenir lesiones. ¬øTe gustar√≠a saber m√°s detalles sobre estos bonus?"
    ],
    "testimonio": [
        f"Nuestros alumnos han tenido resultados incre√≠bles. Por ejemplo, {landing_info['testimonios'][0]['nombre']} dice: \"{landing_info['testimonios'][0]['comentario']}\". ¬øTe gustar√≠a ver m√°s testimonios o conocer c√≥mo puedes lograr resultados similares?",
        f"Tenemos muchas historias de √©xito. {landing_info['testimonios'][1]['nombre']} nos cuenta: \"{landing_info['testimonios'][1]['comentario']}\". ¬øTe motivar√≠a ver m√°s testimonios de alumnos que han transformado su cuerpo?",
        "Los resultados de nuestros alumnos hablan por s√≠ mismos. Muchos han perdido entre 5 y 10 kilos en pocos meses, mejorando tambi√©n su energ√≠a y estado de √°nimo. ¬øTe gustar√≠a conocer m√°s historias de √©xito?"
    ],
    "entrenadores": [
        f"Tus entrenadores ser√°n {' y '.join(landing_info['entrenadores'])}, artistas, bailarines y entrenadores profesionales con amplio recorrido internacional en pa√≠ses como China, Corea del Sur, M√©xico y m√°s. ¬øTe gustar√≠a saber m√°s sobre su experiencia?",
        f"{' y '.join(landing_info['entrenadores'])} son profesionales con experiencia internacional en entrenamiento f√≠sico y danza. Han compartido su conocimiento con personas de todas las edades en varios pa√≠ses. ¬øHay algo espec√≠fico que quieras saber sobre ellos?",
        "Nuestros entrenadores son profesionales con experiencia internacional que te guiar√°n en cada paso del programa, adaptando los ejercicios a tu nivel y necesidades. ¬øTe gustar√≠a comenzar a entrenar con ellos?"
    ],
    "inscripcion": [
        f"¬°Inscribirte es muy f√°cil! Solo tienes que hacer clic en el bot√≥n '¬°QUIERO INSCRIBIRME AHORA!' o visitar este enlace: {landing_info['enlace_inscripcion']}. ¬øTe gustar√≠a inscribirte ahora?",
        f"Puedes unirte al programa en cualquier momento a trav√©s de nuestro enlace de inscripci√≥n: {landing_info['enlace_inscripcion']}. El proceso es r√°pido y seguro. ¬øNecesitas ayuda con la inscripci√≥n?",
        "Para comenzar tu transformaci√≥n, solo tienes que hacer clic en el bot√≥n de inscripci√≥n que encontrar√°s en la p√°gina. ¬øQuieres que te dirija directamente a la p√°gina de inscripci√≥n?"
    ],
    "duracion": [
        f"Cada clase dura {landing_info['duracion_diaria']}, y el programa est√° dise√±ado para que entrenes {landing_info['dias_semana']}. Esto es suficiente para ver resultados sin ocupar demasiado tiempo de tu d√≠a. ¬øTe parece un tiempo adecuado?",
        "El programa est√° dise√±ado para que dediques solo 45 minutos al d√≠a, 5 d√≠as a la semana. Esto es el tiempo √≥ptimo para ver resultados sin sobrecargar tu agenda. ¬øCrees que podr√≠as dedicar este tiempo a mejorar tu salud?",
        "Solo necesitas 45 minutos diarios durante 5 d√≠as a la semana para seguir nuestro programa. Es el tiempo justo para conseguir resultados sin que interfiera con tus otras actividades. ¬øTe gustar√≠a saber c√≥mo distribuir estas sesiones en tu semana?"
    ],
    "contacto": [
        f"Puedes contactarnos a trav√©s del correo electr√≥nico {landing_info['contacto']} para cualquier consulta o soporte que necesites. ¬øHay algo espec√≠fico sobre lo que necesites ayuda?",
        f"Estamos disponibles para resolver tus dudas a trav√©s de nuestro correo electr√≥nico: {landing_info['contacto']}. ¬øTienes alguna pregunta espec√≠fica que podamos responderte ahora?",
        "Si tienes cualquier pregunta o necesitas asistencia, puedes contactarnos por email. Tambi√©n puedes preguntarme a m√≠ directamente y tratar√© de ayudarte lo mejor posible. ¬øEn qu√© puedo ayudarte hoy?"
    ],
    "fallback": [
        "Lo siento, no he entendido completamente tu pregunta. ¬øPodr√≠as reformularla? Estoy aqu√≠ para ayudarte con informaci√≥n sobre el programa Adelgaza sin Salir de Casa.",
        "Disculpa, no estoy seguro de entender lo que necesitas. ¬øTe gustar√≠a conocer sobre los precios, beneficios, niveles del programa o algo m√°s espec√≠fico?",
        "Parece que no tengo una respuesta espec√≠fica para eso. ¬øPuedo ayudarte con informaci√≥n sobre los entrenamientos, precios, o beneficios del programa?"
    ]
}

# Funciones para el procesamiento de texto
def preprocess_text(text):
    """Preprocesa el texto para an√°lisis (tokenizaci√≥n, eliminaci√≥n de stopwords, etc.)"""
    text = text.lower()
    tokens = word_tokenize(text)
    stop_words = set(stopwords.words('spanish'))
    filtered_tokens = [w for w in tokens if w.isalnum() and w not in stop_words]
    lemmatizer = WordNetLemmatizer()
    lemmas = [lemmatizer.lemmatize(w) for w in filtered_tokens]
    return lemmas

def match_pattern(user_input, patterns):
    """Verifica si el input del usuario coincide con alg√∫n patr√≥n"""
    for pattern in patterns:
        if re.search(pattern, user_input, re.IGNORECASE):
            return True
    return False

def detect_intent(user_input):
    """Detecta la intenci√≥n del usuario basada en su mensaje"""
    for intent, patterns in conversation_patterns.items():
        if match_pattern(user_input, patterns):
            return intent
    
    # Si no se detecta ninguna intenci√≥n espec√≠fica, buscar en las FAQ
    preprocessed_input = ' '.join(preprocess_text(user_input))
    for qa in faq:
        question_tokens = preprocess_text(qa["question"])
        common_tokens = set(preprocessed_input.split()) & set(question_tokens)
        if len(common_tokens) > 1:  # Si hay al menos dos tokens en com√∫n
            return "faq", qa["answer"]
    
    return "fallback"

def generate_response(intent, faq_answer=None):
    """Genera una respuesta basada en la intenci√≥n detectada"""
    if isinstance(intent, tuple) and intent[0] == "faq":
        return intent[1]
    
    responses = chat_responses.get(intent, chat_responses["fallback"])
    return random.choice(responses)

def get_call_to_action():
    """Genera un call-to-action para dirigir al usuario hacia la conversi√≥n"""
    ctas = [
        f"¬øTe gustar√≠a inscribirte ahora? Visita: {landing_info['enlace_inscripcion']}",
        "¬øQuieres comenzar tu transformaci√≥n hoy mismo? Preg√∫ntame c√≥mo inscribirte.",
        "Si est√°s listo para cambiar tu cuerpo, puedo ayudarte a inscribirte en el programa.",
        "¬øTienes alguna otra pregunta antes de tomar la decisi√≥n de inscribirte?",
        f"Recuerda que actualmente tenemos una oferta especial: ¬°solo ${landing_info['precio']['oferta']} en lugar de ${landing_info['precio']['normal']}!"
    ]
    return random.choice(ctas)

def scrape_landing_page(url):
    """Extrae informaci√≥n de la landing page"""
    try:
        response = requests.get(url)
        if response.status_code == 200:
            soup = BeautifulSoup(response.text, 'html.parser')
            # Aqu√≠ se implementar√≠a la l√≥gica para extraer informaci√≥n espec√≠fica
            # como precios, beneficios, etc. de la p√°gina web
            return True
        return False
    except Exception as e:
        print(f"Error scraping landing page: {e}")
        return False

# Rutas Flask
@app.route('/')
def home():
    return render_template('chat.html')

@app.route('/api/chat', methods=['POST'])
def chat():
    user_message = request.json.get('message', '')
    
    if not user_message:
        return jsonify({'error': 'No message provided'}), 400
    
    intent = detect_intent(user_message)
    
    if isinstance(intent, tuple):
        response = generate_response(intent)
    else:
        response = generate_response(intent)
    
    # Agregar un call-to-action si no es un saludo o despedida
    if intent not in ['saludos', 'despedidas', 'agradecimientos']:
        # 30% de probabilidad de agregar un CTA
        if random.random() < 0.3:
            response += "\n\n" + get_call_to_action()
    
    return jsonify({
        'response': response,
        'intent': intent if not isinstance(intent, tuple) else intent[0]
    })

@app.route('/api/faq')
def get_faq():
    return jsonify({'faq': faq})

@app.route('/api/program_info')
def get_program_info():
    return jsonify({'info': landing_info})

if __name__ == '__main__':
    # Intenta extraer informaci√≥n actualizada de la landing page
    # Si falla, usa la informaci√≥n predefinida
    landing_url = "http://localhost:5000"  # Reemplazar con la URL real
    scrape_landing_page(landing_url)
    
    app.run(debug=True) 